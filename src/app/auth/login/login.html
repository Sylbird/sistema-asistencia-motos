<main>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Iniciar Sesión</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <mat-form-field>
          <mat-label>Correo</mat-label>
          <input matInput formControlName="correo" />
          @if (loginForm.controls.correo.value === '') {
            <mat-error>Correo es requerido</mat-error>
          }
          @if (loginForm.controls.correo.hasError('email')) {
            <mat-error>Correo no es válido</mat-error>
          }
        </mat-form-field>
        <mat-form-field>
          <mat-label>Contraseña</mat-label>
          <input matInput formControlName="clave" [type]="hidePassword() ? 'password' : 'text'" />
          @if (loginForm.controls.clave.invalid) {
            <mat-error>Contraseña es requerida</mat-error>
          }
          <button
            type="button"
            matIconButton
            matSuffix
            (click)="togglePassword($event)"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hidePassword()"
          >
            <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </mat-form-field>
        @if (errorMessage()) {
          <mat-error>{{ errorMessage() }}</mat-error>
        }
        <button
          id="login-button"
          matFab
          extended
          [type]="loginForm.invalid ? 'button' : 'submit'"
          color="primary"
        >
          <mat-icon>login</mat-icon>
          Iniciar Sesión
        </button>
        <p>No tienes una cuenta? <a routerLink="/sign-up">Regístrate aquí</a></p>
        <p>
          <a routerLink="/reset-password">¿Olvidaste tu contraseña?</a>
        </p>
      </form>
    </mat-card-content>
  </mat-card>
</main>
